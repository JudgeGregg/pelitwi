<!DOCTYPE html>
<html lang="en">
<head>
          <title>Test Pelican - Serving Static Content From a Directory</title>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />

        <meta name="Description" content="An event-driven networking engine written in Python and MIT licensed." />

        <link rel="stylesheet" type="text/css" href="https://judgegregg.github.io/pelitwi/theme/css/twistedtrac.css" />


</head>

<body>
        <div id="banner">
                <div id="top_grad"></div>
                <div id="tab">
                        <a href="https://twistedmatrix.com/trac/wiki">HOME</a>
                        <a href="https://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions">FAQ</a>
                        <a href="/">DOCS</a>
                        <a href="https://twistedmatrix.com/trac/wiki/Downloads">DOWNLOAD</a>
                </div>

                <div id="header">
                        <a id="logo" href="https://judgegregg.github.io/pelitwi/"><img src="https://judgegregg.github.io/pelitwi/theme/images/trac_banner.png" alt="Twisted" /></a>
                </div>
        </div>

<div id="mainnav" class="related">
	<ul>
		<li><a href="https://judgegregg.github.io/pelitwi">Twisted 21.2.0 documentation</a> Â»</li>
	</ul>
</div>
        <div id="ctxtnav" class="nav">
        </div>

    <section>

    <div class="document">
        <div class="documentwrapper">
        <div class="bodywrapper">
        <h1>Serving Static Content From a Directory</h1>
        
        <div class="entry-content">
        <p>The goal of this example is to show you how to serve static content from a filesystem.
First, we need to import some objects:</p>
<ul>
<li><p class="first"><cite>Site &lt;twisted.web.server.Site&gt;</cite>, an <cite>IProtocolFactory &lt;twisted.internet.interfaces.IProtocolFactory&gt;</cite> which glues a listening server port (<cite>IListeningPort &lt;twisted.internet.interfaces.IListeningPort&gt;</cite>) to the <cite>HTTPChannel &lt;twisted.web.http.HTTPChannel&gt;</cite> implementation:</p>
<pre class="literal-block">
from twisted.web.server import Site
</pre>
</li>
<li><p class="first"><cite>File &lt;twisted.web.static.File&gt;</cite>, an <cite>IResource &lt;twisted.web.resource.IResource&gt;</cite> which glues the HTTP protocol implementation to the filesystem:</p>
<pre class="literal-block">
from twisted.web.static import File
</pre>
</li>
<li><p class="first">The <cite>reactor &lt;twisted.internet.reactor&gt;</cite>, which drives the whole process, actually accepting TCP connections and moving bytes into and out of them:</p>
<pre class="literal-block">
from twisted.internet import reactor
</pre>
</li>
<li><p class="first">And the <cite>endpoints &lt;twisted.internet.endpoints&gt;</cite> module, which gives us tools for, amongst other things, creating listening sockets:</p>
<pre class="literal-block">
from twisted.internet import endpoints
</pre>
</li>
</ul>
<p>Next, we create an instance of the File resource pointed at the directory to serve:</p>
<pre class="literal-block">
resource = File(&quot;/tmp&quot;)
</pre>
<p>Then we create an instance of the Site factory with that resource:</p>
<pre class="literal-block">
factory = Site(resource)
</pre>
<p>Now we glue that factory to a TCP port:</p>
<pre class="literal-block">
endpoint = endpoints.TCP4ServerEndpoint(reactor, 8888)
endpoint.listen(factory)
</pre>
<p>Finally, we start the reactor so it can make the program work:</p>
<pre class="literal-block">
reactor.run()
</pre>
<p>And that's it. Here's the complete program:</p>
<pre class="literal-block">
from twisted.web.server import Site
from twisted.web.static import File
from twisted.internet import reactor, endpoints

resource = File('/tmp')
factory = Site(resource)
endpoint = endpoints.TCP4ServerEndpoint(reactor, 8888)
endpoint.listen(factory)
reactor.run()
</pre>
<p>Bonus example!
For those times when you don't actually want to write a new program, the above implemented functionality is one of the things the command line <tt class="docutils literal">twistd</tt> tool can do.
In this case, the command</p>
<div class="highlight"><pre><span></span>twistd -n web --path /tmp
</pre></div>
<p>will accomplish the same thing as the above server.
See <a class="reference external" href="https://judgegregg.github.io/pelitwi/pages/the-basics.html">helper programs</a> in the Twisted Core documentation for more information on using <tt class="docutils literal">twistd</tt>.</p>

        </div>
        </div>
        </div>
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
</div>
</div>    </div>

    </section>

        <div id="footer"><hr>
                <div> </div>
                <p class="left2">
        Copyright 2021, Twisted Matrix Labs. Ver 21.2.0. Built on 2021-02-28.<br />
        Site design<br />
        By <a href="http://huw.ugbox.net/">huw.wilkins.</a>

                </p>
                <p class="right"></p>
        </div>


</body>
</html>